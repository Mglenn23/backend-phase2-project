'use strict'

const existsIn = obj => prop => (obj[prop])

function defaultFormatters () {
  return Object.keys(table)
}

function parse (formatters) {
  return (formatters && Array.isArray(formatters) && formatters.length)
          ? formatters.filter(existsIn(table))
          : defaultFormatters()
}

const table = {
  '%H': 'commitHash',
  '%h': 'commitHashShort',
  '%T': 'treeHash',
  '%t': 'treeHashShort',
  '%P': 'parentHashes',
  '%p': 'parentHashesShort',
  '%an': 'authorName',
  '%aN': 'authorName',
  '%ae': 'authorEmail',
  '%aE': 'authorEmail',
  '%ad': 'authorDate',
  '%aD': 'authorDateFull',
  '%ar': 'authorDateRelative',
  '%at': 'authorDateTimestamp',
  '%ai': 'authorDateISO',
  '%aI': 'authorDateISOStrict',
  '%cn': 'committerName',
  '%cN': 'committerName',
  '%ce': 'committerEmail',
  '%cE': 'committerEmail',
  '%cd': 'committerDate',
  '%cD': 'committerDateFull',
  '%cr': 'committerDateRelative',
  '%ct': 'committerDateTimestamp',
  '%ci': 'committerDateISO',
  '%cI': 'committerDateISOStrict',
  '%d': 'refNames',
  '%D': 'refNames',
  '%e': 'encoding',
  '%s': 'subject',
  '%f': 'subjectDashed',
  '%b': 'body',
  '%B': 'body',
  '%N': 'commitNotes',
  '%gD': 'reflogSector',
  '%gd': 'reflogSector',
  '%gn': 'reflogIdentityName',
  '%gN': 'reflogIdentityName',
  '%ge': 'reflogIdentityEmail',
  '%gE': 'reflogIdentityEmail',
  '%gs': 'reflogSubject'
}

module.exports = {
  defaultFormatters,
  parse,
  table
}
